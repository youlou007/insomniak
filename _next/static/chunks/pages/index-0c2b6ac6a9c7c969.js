(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5161)}])},5161:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Home}});var n=a(5893),o=a(7294),s=a(9008),l=a.n(s);a(5675);var r=a(5506),components_Particles=()=>{let e=(0,o.useRef)(null),{theme:t}=(0,o.useContext)(r.ThemeContext);return(0,o.useEffect)(()=>{if(!e.current)return;let t=e.current;for(;t.firstChild;)t.removeChild(t.firstChild);for(let e=0;e<150;e++){let e=document.createElement("div");e.className="particle";let a=4+4*Math.random();e.style.width="".concat(a,"px"),e.style.height="".concat(a,"px");let n=100*Math.random();e.style.left="".concat(n,"%");let o=-(50*Math.random());e.style.top="".concat(o,"vh");let s=15*Math.random();e.style.animationDelay="".concat(s,"s");let l=10+20*Math.random();e.style.animationDuration="".concat(l,"s"),t.appendChild(e)}return()=>{for(;t.firstChild;)t.removeChild(t.firstChild)}},[t]),(0,n.jsx)("div",{ref:e,className:"fixed top-0 left-0 w-full h-full pointer-events-none z-0",style:{overflow:"hidden",position:"fixed",height:"100vh"}})},i=a(3495),components_Poem=e=>{let{poem:t,searchTerm:a,onReadMore:o,isCompact:s=!1,noBorder:l=!1,centered:r=!1}=e,{title:c,content:m,author:d,date:h}=t,p=m.split("\n"),u=p.slice(0,4),highlightText=e=>{if(!a)return e;let t=RegExp("(".concat(a,")"),"gi"),o=e.split(t);return o.map((e,a)=>t.test(e)?(0,n.jsx)("mark",{className:"bg-[#00FFFF] text-black px-1 rounded",children:e},a):e)},x=r?"text-center":"";return(0,n.jsxs)(i.E.div,{className:"".concat("bg-transparent p-4 rounded-lg"," relative ").concat("w-full"," cursor-pointer poem-card"),whileHover:{scale:1.02},transition:{duration:.2},onClick:()=>o(t),children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2 ".concat(x),children:highlightText(c)}),(0,n.jsxs)("div",{className:"text-sm text-gray-400 mb-3 ".concat(x),children:[d&&(0,n.jsxs)("span",{children:["Par ",highlightText(d)]}),h&&(0,n.jsxs)("span",{className:"ml-2",children:["• ",h]})]}),(0,n.jsx)("div",{className:"whitespace-pre-line text-gray-200 ".concat(x),children:u.map((e,t)=>(0,n.jsx)("div",{className:"mb-1",children:highlightText(e)},"preview-".concat(t)))}),p.length>4&&(0,n.jsx)("div",{className:"mt-3 text-gray-400 ".concat(x),children:"..."})]})},c=a(1526);let getTopLeftAngle=()=>90*Math.random()-45,getTopRightAngle=()=>90*Math.random()-45,getBottomRightAngle=()=>90*Math.random()-45,getBottomLeftAngle=()=>90*Math.random()-45;var components_PopupParticles=e=>{let{isVisible:t}=e,a=(0,o.useRef)(null),{theme:s}=(0,o.useContext)(r.ThemeContext);return(0,o.useEffect)(()=>{if(!a.current||!t)return;let e=a.current;for(;e.firstChild;)e.removeChild(e.firstChild);for(let t=0;t<120;t++){let t,a;let n=document.createElement("div");n.className="popup-particle";let o=2+4*Math.random();n.style.width="".concat(o,"px"),n.style.height="".concat(o,"px");let s=["top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],l=s[Math.floor(Math.random()*s.length)];switch(l){case"top":t=5+90*Math.random(),a=0;break;case"right":t=100,a=10+80*Math.random();break;case"bottom":t=5+90*Math.random(),a=99;break;case"left":t=0,a=10+80*Math.random();break;case"top-left":t=1,a=1;break;case"top-right":t=99,a=1;break;case"bottom-right":t=99,a=99;break;case"bottom-left":t=1,a=99}l.includes("-")&&(t+=(l.includes("left")?1:-1)*Math.random()*5,a+=(l.includes("top")?1:-1)*Math.random()*5),n.style.left="".concat(t,"%"),n.style.top="".concat(a,"%");let r="from-".concat(l);if(l.includes("-")){let e;"top-left"===l?(e=getTopLeftAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-top-left-fan"):"top-right"===l?(e=getTopRightAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-top-right-fan"):"bottom-right"===l?(e=getBottomRightAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-bottom-right-fan"):"bottom-left"===l&&(e=getBottomLeftAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-bottom-left-fan")}n.classList.add(r);let i=80+50*Math.random();n.style.setProperty("--distance-multiplier",i+"%");let c=2*Math.random();n.style.animationDelay="".concat(c,"s");let m=4+4*Math.random();n.style.animationDuration="".concat(m,"s"),e.appendChild(n)}let n=setInterval(()=>{if(e&&t)for(let t=0;t<8;t++){let t,a;let n=document.createElement("div");n.className="popup-particle";let o=2+4*Math.random();n.style.width="".concat(o,"px"),n.style.height="".concat(o,"px");let s=["top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],l=s[Math.floor(Math.random()*s.length)];switch(l){case"top":t=5+90*Math.random(),a=0;break;case"right":t=100,a=10+80*Math.random();break;case"bottom":t=5+90*Math.random(),a=99;break;case"left":t=0,a=10+80*Math.random();break;case"top-left":t=1,a=1;break;case"top-right":t=99,a=1;break;case"bottom-right":t=99,a=99;break;case"bottom-left":t=1,a=99}l.includes("-")&&(t+=(l.includes("left")?1:-1)*Math.random()*5,a+=(l.includes("top")?1:-1)*Math.random()*5),n.style.left="".concat(t,"%"),n.style.top="".concat(a,"%");let r="from-".concat(l);if(l.includes("-")){let e;"top-left"===l?(e=getTopLeftAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-top-left-fan"):"top-right"===l?(e=getTopRightAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-top-right-fan"):"bottom-right"===l?(e=getBottomRightAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-bottom-right-fan"):"bottom-left"===l&&(e=getBottomLeftAngle(),n.style.setProperty("--fan-angle","".concat(e,"deg")),r="from-bottom-left-fan")}n.classList.add(r);let i=80+50*Math.random();n.style.setProperty("--distance-multiplier",i+"%");let c=4+4*Math.random();n.style.animationDuration="".concat(c,"s"),e.appendChild(n)}},800);return()=>{for(clearInterval(n);e.firstChild;)e.removeChild(e.firstChild)}},[t,s]),(0,n.jsx)(i.E.div,{ref:a,className:"absolute inset-0 pointer-events-none overflow-visible rounded-2xl",style:{margin:"-50px",padding:"50px",zIndex:60},animate:{opacity:t?1:0},transition:{duration:.5}})},components_PoemPopup=e=>{let{poem:t,onClose:a,searchTerm:s}=e,[l,r]=(0,o.useState)(!1);(0,o.useEffect)(()=>{document.body.style.overflow="hidden";let e=setTimeout(()=>r(!0),100);return()=>{document.body.style.overflow="auto",clearTimeout(e)}},[]);let highlightText=e=>{if(!s)return e;let t=RegExp("(".concat(s,")"),"gi"),a=e.split(t);return a.map((e,a)=>t.test(e)?(0,n.jsx)("mark",{className:"bg-[#00FFFF] text-black px-1 rounded",children:e},a):e)};return(0,n.jsx)(c.M,{children:(0,n.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>{r(!1),setTimeout(a,500)},children:[(0,n.jsx)(i.E.div,{className:"absolute inset-0 bg-black bg-opacity-80 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}}),(0,n.jsxs)(i.E.div,{initial:{scale:.9,opacity:0},animate:{scale:l?1:.9,opacity:l?1:0},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-transparent rounded-2xl p-8 max-w-sm w-full mx-4 text-center popup-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(components_PopupParticles,{isVisible:l}),(0,n.jsx)("h2",{className:"text-3xl font-bold mb-3",children:highlightText(t.title)}),(0,n.jsxs)("div",{className:"text-base text-gray-400 mb-7",children:[t.author&&(0,n.jsxs)("span",{children:["Par ",highlightText(t.author)]}),t.date&&(0,n.jsxs)("span",{className:"ml-2",children:["• ",t.date]})]}),(0,n.jsx)("div",{className:"whitespace-pre-line text-gray-200 text-xl poem-text",children:t.content.split("\n").map((e,t)=>(0,n.jsx)("div",{className:"mb-3",children:highlightText(e)},t))})]})]})})};function Home(){let[e,t]=(0,o.useState)([]),[a,s]=(0,o.useState)(""),[i,c]=(0,o.useState)(!1),[m,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(!1),u=(0,o.useRef)(null),x=(0,o.useRef)([]),{theme:g,toggleTheme:f}=(0,o.useContext)(r.ThemeContext);(0,o.useEffect)(()=>{function handleClickOutside(e){!u.current||u.current.contains(e.target)||!h||e.target.closest(".navbar-menu")||e.target.closest('[aria-label="Menu"]')||(p(!1),a||t(x.current))}return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[h,a]),(0,o.useEffect)(()=>{fetchPoems()},[]);let fetchPoems=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(!0);try{let a=e?"/api/poems?query=".concat(encodeURIComponent(e)):"/api/poems",n=await fetch(a);if(!n.ok)throw Error("Erreur lors de la r\xe9cup\xe9ration des po\xe8mes");let o=await n.json();t(o),e||(x.current=o)}catch(e){console.error("Erreur:",e)}finally{c(!1)}},handleOpenPoem=e=>{d(e)},b=e.slice(0,2),y=e.slice(2);return(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:"Yacine, pens\xe9es nocturnes - Po\xe8mes"}),(0,n.jsx)("meta",{name:"description",content:"Collection de po\xe8mes de Yacine"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(components_Particles,{}),(0,n.jsx)("button",{className:"theme-toggle-button",onClick:f,"aria-label":"dark"===g?"Passer au th\xe8me clair":"Passer au th\xe8me sombre",children:(0,n.jsx)("img",{src:"/images/journuit button.png",alt:"dark"===g?"Mode jour":"Mode nuit",width:60,height:60,className:"w-16 h-16 object-contain"})}),(0,n.jsxs)("div",{className:"relative z-10",children:[(0,n.jsxs)("div",{className:"fixed right-0 top-4 z-50 mr-4",children:[(0,n.jsx)("button",{className:"w-16 h-16 relative focus:outline-none",onClick:()=>{p(!h),document.querySelector(".navbar-menu").classList.toggle("hidden")},"aria-label":"Menu",children:(0,n.jsx)("img",{src:"/images/hamburger button.png",alt:"Menu",className:"w-16 h-16 object-contain"})}),(0,n.jsx)("div",{ref:u,className:"navbar-menu hidden absolute right-0 top-16 bg-opacity-90 p-4 rounded-lg shadow-lg w-64",children:(0,n.jsxs)("div",{className:"relative mb-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"Rechercher un po\xe8me...",value:a,onChange:e=>{let t=e.target.value;s(t),fetchPoems(t)},className:"w-full border rounded-lg py-2 pl-4 pr-10 search-input"}),a&&(0,n.jsx)("button",{onClick:()=>{s(""),p(!1),t(x.current)},className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:(0,n.jsx)("img",{src:"/images/return button.png",alt:"Retour",className:"w-6 h-6 object-contain"})}),!a&&(0,n.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:(0,n.jsx)("img",{src:"/images/loupe barre de recherche.png",alt:"Rechercher",className:"w-6 h-6 object-contain"})})]})})]}),(0,n.jsx)("main",{className:"pt-10 max-w-7xl mx-auto px-4",children:i?(0,n.jsx)("div",{className:"text-center py-12",children:"Chargement..."}):e.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"min-h-screen flex flex-col justify-start items-center relative pt-10",children:[(0,n.jsx)("div",{className:"w-full text-center mb-0",children:(0,n.jsx)("h1",{className:"text-8xl font-bold font-blocky",children:"Yacine - L'encre des insomnie"})}),(0,n.jsx)("div",{className:"w-full relative",children:(0,n.jsxs)("div",{className:"relative mx-auto",style:{width:"100%",maxWidth:"1500px",height:"1300px"},children:[(0,n.jsx)("img",{src:"/images/title hand.png",alt:"Main",className:"w-full h-full object-contain"}),(0,n.jsx)("div",{className:"absolute left-[-0px] bottom-[200px] w-[300px]",children:b[0]&&(0,n.jsx)(components_Poem,{poem:b[0],searchTerm:a,onReadMore:handleOpenPoem,isCompact:!0,noBorder:!0,centered:!0})}),(0,n.jsx)("div",{className:"absolute right-[-0px] bottom-[200px] w-[300px]",children:b[1]&&(0,n.jsx)(components_Poem,{poem:b[1],searchTerm:a,onReadMore:handleOpenPoem,isCompact:!0,noBorder:!0,centered:!0})})]})})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 mx-auto my-24",children:y.map(e=>(0,n.jsx)("div",{className:"w-[300px] mx-auto",children:(0,n.jsx)(components_Poem,{poem:e,searchTerm:a,onReadMore:handleOpenPoem,noBorder:!0,centered:!0})},e.id))})]}):(0,n.jsx)("div",{className:"text-center py-12",children:a?'Aucun po\xe8me trouv\xe9 pour "'.concat(a,'"'):"Aucun po\xe8me disponible"})}),(0,n.jsx)("footer",{className:"py-6 text-center",children:(0,n.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," L'encre des insomnies Tous droits r\xe9serv\xe9s (c'est a moi)."]})})]}),m&&(0,n.jsx)(components_PoemPopup,{poem:m,onClose:()=>{d(null)},searchTerm:a})]})}}},function(e){e.O(0,[198,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);